<html>
	<head>
		<title>OnSong API: Books</title>
		<link rel="stylesheet" type="text/css" href="../assets/styles/default.css"/>
	</head>
	<body>
		<header>
			<div id="logo"/>
		</header>
		<div id="content">
			<h2>Books</h2>
			<p>Books are used to organize large libraries of songs into collections.</p>
	
			<h3>List books</h3>
			<table>
				<tr class="even"><td><strong>URL</strong></td><td><code>/api/&lt;auth_token&gt;/books</code></td></tr>
				<tr class="odd"><td><strong>Method</strong></td><td><code>GET</code></td></tr>
				<tr class="even"><td><strong>Version</strong></td><td>1.0</td></tr>
			</table>
	
			<h4>Description</h4>
			<p>Lists books in your OnSong library.</p>

			<h4>Path arguments</h4>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>auth_token</strong></td>
						<td>string</td>
						<td>The authentication token used to authenticate the request.</td>
						<td>Required</td>
					</tr>
				</tbody>
			</table>

			<h4>Query arguments</h4>
			<p>Options for searching are passed via the query string as follows:</p>
			<p style="margin-bottom:1em;">
				<code>/api/&lt;auth_token&gt;/books?q=sample&sort=title</code>
			</p>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>q</strong></td>
						<td>string</td>
						<td>The query to look up books by title</td>
						<td>Optional</td>
					</tr>
					<tr class="even">
						<td><strong>sort</strong></td>
						<td>string</td>
						<td>
							The sort method to use when returning sets. Options include: 
							<ul>
								<li><strong>title</strong> sorts books by title. Default.</li>
								<li><strong>orderIndex</strong> sorts books by their set position.</li>
								<li><strong>quantity</strong> sorts books by the number of songs contained within.</li>
							</ul>
						</td>
						<td>Optional</td>
					</tr>
					<tr class="odd">
						<td><strong>descending</strong></td>
						<td>boolean</td>
						<td>Determines if sets should be returned in descending order. The default order is set by the sort method.</td>
						<td>Optional</td>
					</tr>
					<tr class="even">
						<td><strong>limit</strong></td>
						<td>number</td>
						<td>Limits the number of results returned. Default is 100.</td>
						<td>Optional</td>
					</tr>
					<tr class="odd">
						<td><strong>start</strong></td>
						<td>number</td>
						<td>Offsets the start of returned results to be used for paging through results. Default is 0.</td>
						<td>Optional</td>
					</tr>
				</tbody>
			</table>
			
			<h4>Response</h4>
			<p>Returns a list of sets in the OnSong library including the set's unique identifier, title and quantity of songs in the set.</p>
			
			<h4>Response example</h4>
			<pre>{
  "count" : 1,
  "results" : [
    {
      "ID" : "Sample Book",
      "name" : "Sample Book"
    }
  ],
  "attributes" : {
    "q" : "sample",
    "sort" : "title"
  }
}</pre>

			<h3>Create book</h3>
			<table>
				<tr class="even"><td><strong>URL</strong></td><td><code>/api/&lt;auth_token&gt;/books</code></td></tr>
				<tr class="odd"><td><strong>Method</strong></td><td><code>PUT</code></td></tr>
				<tr class="even"><td><strong>Version</strong></td><td>1.0</td></tr>
			</table>
			
			<h4>Description</h4>
			<p>Creates a new book in your library.</p>

			<h4>Path arguments</h4>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>auth_token</strong></td>
						<td>string</td>
						<td>The authentication token used to authenticate the request.</td>
						<td>Required</td>
					</tr>
				</tbody>
			</table>
			
			<h4>Body arguments</h4>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>name</strong></td>
						<td>string</td>
						<td>The name of the book to create.</td>
						<td>Required</td>
					</tr>
					<tr class="even">
						<td><strong>songs</strong></td>
						<td>array</td>
						<td>An array of song identifiers to add to the book.</td>
						<td>Optional</td>
					</tr>
				</tbody>
			</table>

			<h4>Response</h4>
			<p>One of two results will be returned:</p>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>success</strong></td>
						<td>object</td>
						<td>The operation was successful and basic set information is returned.</td>
					</tr>
					<tr class="even">
						<td><strong>error</strong></td>
						<td>string</td>
						<td>The operation has failed and text indicating the error is returned.</td>
					</tr>
				</tbody>
			</table>
			
			<h4>Response example</h4>
			<p>The following is an example of a successful creation:</p>
			<pre>{
  "success" : {
    "ID" : "Christmas Carols", 
    "name" : "Christmas Carols"
  }
}</pre>
			<p>The following is an example of a failed operation with a 500 status code:</p>
			<pre>{
  "error" : "Name is required"
}</pre>

			<h3>View book information</h3>
			<table>
				<tr class="even"><td><strong>URL</strong></td><td><code>/api/&lt;auth_token&gt;/books/&lt;book_identifier&gt;</code></td></tr>
				<tr class="odd"><td><strong>Method</strong></td><td><code>GET</code></td></tr>
				<tr class="even"><td><strong>Version</strong></td><td>1.0</td></tr>
			</table>
			
			<h4>Description</h4>
			<p>Retrieves book information from the OnSong library.</p>
			
			<h4>Path arguments</h4>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>auth_token</strong></td>
						<td>string</td>
						<td>The authentication token used to authenticate the request.</td>
						<td>Required</td>
					</tr>
					<tr class="even">
						<td><strong>book_identifier</strong></td>
						<td>string</td>
						<td>The name of the book to be retrieved. This can be the name of the book to be retrieved or the term "current" to use the currently active book.</td>
						<td>Required</td>
					</tr>
				</tbody>
			</table>
			
			<h4>Query arguments</h4>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>show_songs</strong></td>
						<td>boolean</td>
						<td>Determines if songs should be displayed using the "songs" property.</td>
						<td>Optional</td>
					</tr>
				</tbody>
			</table>

			<h4>Response</h4>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>ID</strong></td>
						<td>string</td>
						<td>The unique identifier of the book.</td>
					</tr>
					<tr class="even">
						<td><strong>name</strong></td>
						<td>string</td>
						<td>The name of the book.</td>
					</tr>
					<tr class="odd">
						<td><strong>songs</strong></td>
						<td>array</td>
						<td>The list of songs that are in the set sorted in custom order.</td>
					</tr>
				</tbody>
			</table>
			
			<h4>Response example</h4>
			<p>The response does not include NULL values.</p>
			<pre>{
  "ID" : "Sample",
  "name" : "Sample",
  "songs" : [
    {
      "ID" : "ADC7622D-EF15-4EA0-9DC0-A8E086F8D8A3",
      "title" : "Oceans (Where Feet May Fail)",
      "favorite" : 0,
      "usefile" : false,
      "key" : "D",
      "artist" : "Hillsong United"
    }
  ]
}</pre>


			<h3>Update book</h3>
			<table>
				<tr class="even"><td><strong>URL</strong></td><td><code>/api/&lt;auth_token&gt;/books/&lt;set_identifier&gt;</code></td></tr>
				<tr class="odd"><td><strong>Method</strong></td><td><code>POST</code></td></tr>
				<tr class="even"><td><strong>Version</strong></td><td>1.0</td></tr>
			</table>
			
			<h4>Description</h4>
			<p>Updates a book in your library.</p>

			<h4>Path arguments</h4>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>auth_token</strong></td>
						<td>string</td>
						<td>The authentication token used to authenticate the request.</td>
						<td>Required</td>
					</tr>
				</tbody>
			</table>

			<h4>Body arguments</h4>
			<p>If arguments are not provided, no changes will be made to that set property.</p>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>name</strong></td>
						<td>string</td>
						<td>The name of the set.</td>
						<td>Optional</td>
					</tr>
					<tr class="even">
						<td><strong>songs</strong></td>
						<td>array</td>
						<td>An array of song identifiers in the preferred order.</td>
						<td>Optional</td>
					</tr>
				</tbody>
			</table>

			<h4>Response</h4>
			<p>Returns an array of status updates for each property that has been updated.</p>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>success</strong></td>
						<td>object</td>
						<td>The operation was successful and basic set information is returned.</td>
					</tr>
					<tr class="even">
						<td><strong>error</strong></td>
						<td>string</td>
						<td>The operation has failed and text indicating the error is returned.</td>
					</tr>
				</tbody>
			</table>
			
			<h4>Response example</h4>
			<p>The following is an example of a successful update:</p>
			<pre>[
  {
    "success" : { "/books/837BB846-F374-4369-86ED-2A1A08EE131B/name" : "Party Songs" }
  },
  {
    "success" : { "/books/837BB846-F374-4369-86ED-2A1A08EE131B/songs" : [ "837BB846-F374-4369-86FF-2A1A08EE131B", "837BB846-F374-4369-86FE-2A1A08EE131B" ] }
  }
]</pre>
			<p>The following is an example of a failed operation with a 500 status code:</p>
			<pre>{
  "error" : "Input must be a dictionary object"
}</pre>

			<h3>Delete book</h3>
			<table>
				<tr class="even"><td><strong>URL</strong></td><td><code>/api/&lt;auth_token&gt;/books/&lt;book_identifier&gt;</code></td></tr>
				<tr class="odd"><td><strong>Method</strong></td><td><code>DELETE</code></td></tr>
				<tr class="even"><td><strong>Version</strong></td><td>1.0</td></tr>
			</table>
			
			<h4>Description</h4>
			<p>Deletes a book from your library.</p>

			<h4>Path arguments</h4>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
						<th>Required</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>auth_token</strong></td>
						<td>string</td>
						<td>The authentication token used to authenticate the request.</td>
						<td>Required</td>
					</tr>
				</tbody>
			</table>

			<h4>Response</h4>
			<table>
				<thead>
					<tr>
						<th>Name</th>
						<th>Type</th>
						<th>Description</th>
					</tr>
				</thead>
				<tbody>
					<tr class="odd">
						<td><strong>success</strong></td>
						<td>object</td>
						<td>The operation was successful and basic set information is returned.</td>
					</tr>
					<tr class="even">
						<td><strong>error</strong></td>
						<td>string</td>
						<td>The operation has failed and text indicating the error is returned.</td>
					</tr>
				</tbody>
			</table>
			
			<h4>Response example</h4>
			<p>The following is an example of a successful deletion:</p>
			<pre>{
  "success" : { "ID" : "837BB846-F374-4369-86ED-2A1A08EE131B", "name" : "Deleted Book" }
}</pre>
			<p>The following is an example of a failed operation with a 500 status code:</p>
			<pre>{
  "error" : "No book found"
}</pre>
		</div>
	</body>
	<script src="../assets/scripts/default.js"></script>
</html>